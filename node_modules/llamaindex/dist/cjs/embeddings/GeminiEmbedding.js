"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "GeminiEmbedding", {
    enumerable: true,
    get: function() {
        return GeminiEmbedding;
    }
});
const _gemini = require("../llm/gemini.js");
const _types = require("./types.js");
class GeminiEmbedding extends _types.BaseEmbedding {
    model;
    temperature;
    topP;
    maxTokens;
    session;
    constructor(init){
        super();
        this.model = init?.model ?? _gemini.GEMINI_MODEL.GEMINI_PRO;
        this.temperature = init?.temperature ?? 0.1;
        this.topP = init?.topP ?? 1;
        this.maxTokens = init?.maxTokens ?? undefined;
        this.session = init?.session ?? _gemini.GeminiSessionStore.get();
    }
    async getEmbedding(prompt) {
        const client = this.session.gemini.getGenerativeModel({
            model: this.model
        });
        const result = await client.embedContent(prompt);
        return result.embedding.values;
    }
    getTextEmbedding(text) {
        return this.getEmbedding(text);
    }
    getQueryEmbedding(query) {
        return this.getTextEmbedding(query);
    }
}
